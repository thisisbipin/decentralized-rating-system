(this["webpackJsonpmeta-basket"]=this["webpackJsonpmeta-basket"]||[]).push([[0],{58:function(t,e,a){},59:function(t,e,a){},60:function(t,e,a){},69:function(t,e,a){},70:function(t,e,a){},71:function(t,e,a){},73:function(t,e,a){"use strict";a.r(e);var n=a(15),s=a.n(n),r=a(49),c=a.n(r),i=(a(58),a(31)),o=a(17),d=(a(59),a(2)),l=a(3),u=a(8),p=a(9),h=(a(60),a.p+"static/media/meta-basket-icon.f10b5d14.png"),j=a(34),b=a(7),m=function(t){Object(u.a)(a,t);var e=Object(p.a)(a);function a(){return Object(d.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("nav",{className:"header navbar navbar-expand-lg navbar-light bg-light",children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)(j.b,{to:"/",children:Object(b.jsxs)("a",{className:"navbar-brand",href:"#",children:[Object(b.jsx)("img",{src:h,alt:"Meta Basket Logo",className:"header__brand__img"}),"Meta Basket"]})}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})})]})}),Object(b.jsx)("div",{className:"dummy-head"})]})}}]),a}(s.a.Component),v=m,_=a(0),x=a(4),O=(a(69),a(51)),g=a.n(O);try{window.ethereum.request({method:"eth_requestAccounts"})}catch(W){}var f=void 0;window.ethereum&&(f=new g.a(window.ethereum));var y=f,w="0x6aAB3f431d01a36d380188652cAaA73877becc15",N=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"pId",type:"uint256"},{internalType:"uint256",name:"priceWei",type:"uint256"}],name:"addOrEditPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"pId",type:"uint256"}],name:"buyProduct",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"pId",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"uint8",name:"_star",type:"uint8"},{internalType:"string",name:"_review",type:"string"}],name:"createRating",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"pId",type:"uint256"}],name:"getCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"pId",type:"uint256"}],name:"getPoints",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"pId",type:"uint256"}],name:"getReviewList",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"time",type:"uint256"},{internalType:"uint8",name:"star",type:"uint8"},{internalType:"string",name:"review",type:"string"}],internalType:"struct RatingContract.Rating[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"withDraw",outputs:[],stateMutability:"nonpayable",type:"function"}],k=function(t){Object(u.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).state={products:[],ismetamaskavailable:!0,ratingContract:void 0,ratings_array:[]},n.state.products=t.productsList,n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.loadBlockchainData(this.props.dispatch)}},{key:"loadBlockchainData",value:function(){var t=Object(x.a)(Object(_.a)().mark((function t(){var e,a,n,s;return Object(_.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.eth.getAccounts();case 3:e=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),this.state.ismetamaskavailable=!1,console.log("please install metamask"),t.abrupt("return");case 11:return this.setState({account:e[0]}),a=new y.eth.Contract(N,w),this.setState({ratingContract:a}),console.log(a),t.next=17,a.methods.getCount(1).call();case 17:return n=t.sent,t.next=20,a.methods.getPoints(1).call();case 20:s=t.sent,console.log(n,s);case 22:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(t){this.setState({products:t.productsList}),console.log(this.state.products)}},{key:"render",value:function(){return 0===this.state.products.length?this.setLoading():Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("section",{className:"products",children:[Object(b.jsx)("h1",{className:"products__main-title",children:Object(b.jsx)("b",{children:"Products \ud83d\udecd\ufe0f "})}),Object(b.jsx)("div",{className:"products__products-container",children:this.state.products.map((function(t){return console.log(t),Object(b.jsx)(j.b,{to:"/product/"+t.PID,children:Object(b.jsxs)("div",{className:"products__products-container__card card",children:[Object(b.jsx)("img",{src:t.ImageURL,className:"card-img-top",alt:t.Name}),Object(b.jsxs)("div",{className:"products__products-container__card__card-body card-body",children:[Object(b.jsx)("h5",{children:t.Name}),Object(b.jsxs)("h6",{children:[Object(b.jsx)("b",{children:"Price:"})," ",t.Price," MATIC"," "]}),Object(b.jsx)("p",{className:"products__products-container__card__card-text card-text",children:t.Details}),Object(b.jsx)("button",{className:"btn btn-primary",children:"View Details"})]})]})},t.PID)}))})]})})}},{key:"setLoading",value:function(){return Object(b.jsxs)("div",{className:"productdetail__loader",children:[Object(b.jsx)("h1",{children:"Loading..."})," ",Object(b.jsx)("div",{className:"spinner-border",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})}}]),a}(s.a.Component),I=k,T=(a(70),a.p+"static/media/Metamask-logo.8fba4248.jpg");var P=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("div",{className:"footer__container container",children:[Object(b.jsxs)("div",{className:"footer__row row",children:[Object(b.jsxs)("div",{className:"col-sm-3",children:[Object(b.jsx)("h4",{className:"title",children:"Meta Basket"}),Object(b.jsx)("p",{children:"Meta Basket is an online store which has a Decentralized, Blockchain Based, Secured and Trusted Rating System."})]}),Object(b.jsxs)("div",{className:"col-sm-3 payment-div",children:[Object(b.jsx)("h4",{className:"title",children:"Payment Methods"}),Object(b.jsx)("p",{children:"you can pay with Meta Mask"}),Object(b.jsx)("ul",{className:"payment",children:Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"#",children:Object(b.jsx)("div",{className:"footer__buy_with_meta_mask",children:Object(b.jsx)("img",{src:T,alt:""})})})})})]})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"row text-center",children:" \xa9 2022. Meta Basket"})]})})},S=a(21),R=(a(71),function(t){Object(u.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).state={temptestReviewList:[],count:0,points:0,ismetamaskavailable:!0,isreviewFetched:!1,isreviewWritten:!1,reviewWrittenText:"Review Submitted",ratingContract:void 0,productid:0,currentproduct:null,productPrice:0,account:"",createrating:{name:"",star:0,review_text:""}},n.state.productid=parseInt(t.match.params.id),n.state.currentproduct=t.productsList[n.state.productid],n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.loadBlockchainData(this.props.dispatch)}},{key:"loadBlockchainData",value:function(){var t=Object(x.a)(Object(_.a)().mark((function t(){var e,a,n,s,r;return Object(_.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.eth.getAccounts();case 3:e=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),this.state.ismetamaskavailable=!1,console.log("please install metamask"),t.abrupt("return");case 11:return this.setState({account:e[0]}),a=new y.eth.Contract(N,w),this.setState({ratingContract:a}),console.log(a),t.next=17,a.methods.getCount(this.state.productid).call();case 17:return n=t.sent,t.next=20,a.methods.getPoints(this.state.productid).call();case 20:return s=t.sent,this.setState({count:n}),this.setState({points:s}),t.next=25,a.methods.getReviewList(this.state.productid).call();case 25:r=t.sent,this.setState({temptestReviewList:r}),console.log(r),this.setState({isreviewFetched:!0});case 29:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(t){this.state.productid=parseInt(t.match.params.id),this.setState({currentproduct:t.productsList[this.state.productid]})}},{key:"handleWriteReview",value:function(){var t=Object(x.a)(Object(_.a)().mark((function t(e){return Object(_.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,this.state.ratingContract.methods.createRating(this.state.productid,this.state.createrating.name,this.state.createrating.star,this.state.createrating.review_text).send({from:this.state.account});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),this.setState({reviewWrittenText:"Some Error, Try Again"});case 9:this.setState({isreviewWritten:!0});case 10:case"end":return t.stop()}}),t,this,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()},{key:"handleBuy",value:function(){var t=Object(x.a)(Object(_.a)().mark((function t(e){return Object(_.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.state.ratingContract.methods.buyProduct(this.state.productid).send({from:this.state.account,value:y.utils.toWei(e+"","ether")});case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return void 0===this.state.currentproduct?Object(b.jsxs)("div",{className:"productdetail__loader",children:[Object(b.jsx)("h1",{children:"Loading..."})," ",Object(b.jsx)("div",{className:"spinner-border",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(j.b,{to:"/",children:Object(b.jsx)("div",{className:"productdetail__back-button",children:Object(b.jsx)("i",{className:"fa-solid fa-angles-left"})})}),Object(b.jsx)("section",{className:"productdetail__product-detail-area",children:Object(b.jsxs)("div",{className:"productdetail__product-detail-area__container",children:[Object(b.jsx)("div",{className:"productdetail__product-detail-area__container__image",children:Object(b.jsx)("img",{src:this.state.currentproduct.ImageURL,alt:""})}),Object(b.jsxs)("div",{className:"productdetail__product-detail-area__container__products-text",children:[Object(b.jsxs)("div",{className:"productdetail__product-detail-area__container__products-text__text",children:[Object(b.jsx)("h3",{children:this.state.currentproduct.Name}),Object(b.jsxs)("h2",{children:[this.state.currentproduct.Price," MATIC"]}),Object(b.jsx)("p",{children:this.state.currentproduct.Details})]}),Object(b.jsx)("div",{className:"productdetail__product-detail-area__container__products-text__buy-btn",children:Object(b.jsxs)("button",{className:"btn btn-warning buy-button",onClick:function(){return t.handleBuy(t.state.currentproduct.Price)},children:[Object(b.jsx)("i",{className:"fa-solid fa-cart-shopping"})," Buy with Meta Mask"]})})]})]})}),Object(b.jsx)("section",{className:"productdetail__product-review-area",children:Object(b.jsx)("div",{className:"productdetail__product-review-area__container",children:Object(b.jsxs)("div",{className:"productdetail__product-review-area__container__content",children:[Object(b.jsxs)("div",{className:"productdetail__product-review-area__container__content__reviews",children:[Object(b.jsx)("div",{className:"productdetail__product-review-area__container__content__reviews__overallreview",children:Object(b.jsxs)("div",{className:"overallreview-container",children:[Object(b.jsx)("h5",{children:"Overall"}),Object(b.jsx)("h4",{children:!0===this.state.isreviewFetched?0==this.state.count?0:(this.state.points/this.state.count).toFixed(2):this.setLoading(!1)}),Object(b.jsxs)("h6",{children:["(",this.state.count," Reviews)"]})]})}),Object(b.jsx)("div",{className:"productdetail__product-review-area__container__content__reviews__all-reviews",children:!1===this.state.isreviewFetched?this.setLoading():this.state.temptestReviewList.map((function(e){return Object(b.jsxs)("div",{className:"productdetail__product-review-area__container__content__reviews__all-reviews__review-card",children:[Object(b.jsxs)("div",{className:"review-card__name_details",children:[Object(b.jsx)("div",{className:"review-card__name_details__image",children:Object(b.jsx)("img",{src:"https://avatars.dicebear.com/api/human/".concat(e.time,".svg")})}),Object(b.jsxs)("div",{className:"review-card__name_details__name",children:[Object(b.jsx)("h2",{children:e.name}),Object(b.jsxs)("span",{children:[t.setStars(e.star),Object(b.jsx)("span",{className:"review-card__name_details__name__date",children:new Date(1e3*parseInt(e.time)).toString().substr(0,16)})]})]})]}),Object(b.jsx)("div",{className:"review-card__review-text",children:Object(b.jsx)("p",{children:e.review})})]},t.state.temptestReviewList.findIndex((function(t){return t==e})))}))})]}),Object(b.jsxs)("div",{className:"productdetail__product-review-area__container__content__create-review-box",children:[Object(b.jsx)("h4",{children:"Add a Review"}),Object(b.jsx)("span",{children:Object(b.jsxs)("h5",{children:["Your Rating:",Object(b.jsx)("input",{type:"text",onChange:function(e){parseFloat(e.target.value)>5&&(e.target.value=5),t.handleInput(e.target.value,"stars")},style:{width:"50px"}}),this.setStars(this.state.createrating.star,"yellow set-stars")]})}),Object(b.jsxs)("form",{action:"#/",className:"form-contact form-review mt-3",children:[Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("input",{className:"form-control",name:"name",type:"text",placeholder:"Enter your name",required:"",onChange:function(e){return t.handleInput(e.target.value,"name")}})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("textarea",{className:"form-control different-control w-100",name:"textarea",id:"textarea",cols:"30",rows:"5",placeholder:"Enter Message",onChange:function(e){return t.handleInput(e.target.value,"review-text")}})}),Object(b.jsx)("div",{className:"form-group text-center text-md-right mt-3",children:Object(b.jsx)("button",{className:this.state.isreviewWritten?"btn btn-primary disabled":"btn btn-primary",onClick:function(e){return t.handleWriteReview(e)},children:1==this.state.isreviewWritten?this.state.reviewWrittenText:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("i",{className:"fa-solid fa-pen-nib"}),Object(b.jsx)("span",{children:" | Write my Review"})," "]})})})]})]})]})})})]})}},{key:"handleInput",value:function(t,e){switch(e){case"name":this.state.createrating.name=t;break;case"review-text":this.state.createrating.review_text=t;break;case"stars":this.setState({createrating:Object(i.a)(Object(i.a)({},this.createrating),{},{star:parseFloat(t)})})}}},{key:"setStars",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yellow";t>=5&&(t=5);for(var a=[];t>.9;)t-=1,a.push("fa-solid fa-star "+e);for(;a.length<5;)a.push("fa-regular fa-star "+e);var n=0;return a.map((function(t){return Object(b.jsx)("i",{className:t,onClick:function(){}},n+=1)}))}},{key:"setLoading",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(b.jsxs)("div",{className:"productdetail__loader",children:[1==t&&Object(b.jsx)("h1",{children:"Loading..."})," ",Object(b.jsx)("div",{className:"spinner-border",role:"status",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})}}]),a}(s.a.Component)),C=R,L=a(52),A={apiKey:"AIzaSyD74kFgqon9w3Gn5djfWRLYrcrsDIcY-xI",authDomain:"haab-store.firebaseapp.com",projectId:"haab-store",storageBucket:"haab-store.appspot.com",messagingSenderId:"102033267700",appId:"1:102033267700:web:12abaa9bff8542b6ca77a1",measurementId:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyD74kFgqon9w3Gn5djfWRLYrcrsDIcY-xI",REACT_APP_authDomain:"haab-store.firebaseapp.com",REACT_APP_projectId:"haab-store",REACT_APP_storageBucket:"haab-store.appspot.com",REACT_APP_messagingSenderId:"102033267700",REACT_APP_appId:"1:102033267700:web:12abaa9bff8542b6ca77a1"}).REACT_APP_measurementId},D=L.a.initializeApp(A),M=D.firestore();var E=function(){var t=Object(n.useState)([]),e=Object(o.a)(t,2),a=e[0],s=e[1];return Object(n.useEffect)((function(){M.collection("productData").get().then((function(t){var e=[];t.forEach((function(t){var a=t.data();e.push(a)})),e=e.sort((function(t,e){return t.PID<e.PID?-1:t.PID>e.PID?1:0})),s(e)}))}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(j.a,{children:[Object(b.jsx)(v,{}),Object(b.jsxs)(S.c,{children:[Object(b.jsx)(S.a,{path:"/",exact:!0,render:function(){return Object(b.jsx)(I,{productsList:a})}}),Object(b.jsx)(S.a,{path:"/decentralized-rating-system/",exact:!0,render:function(){return Object(b.jsx)(I,{productsList:a})}}),Object(b.jsx)(S.a,{path:"/product/:id",exact:!0,render:function(t){return Object(b.jsx)(C,Object(i.a)(Object(i.a)({},t),{},{productsList:a}))}})]})]}),Object(b.jsx)(P,{})]})};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.8d529089.chunk.js.map